(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ec12f8ca"],{"14c3":function(t,e,r){var a=r("c6b6"),n=r("9263");t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var s=r.call(t,e);if("object"!==typeof s)throw TypeError("RegExp exec method returned something other than an Object or null");return s}if("RegExp"!==a(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"25f0":function(t,e,r){"use strict";var a=r("6eeb"),n=r("825a"),s=r("d039"),i=r("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=o;(u||d)&&a(RegExp.prototype,o,(function(){var t=n(this),e=String(t.source),r=t.flags,a=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?i.call(t):r);return"/"+e+"/"+a}),{unsafe:!0})},"31e7":function(t,e,r){r("4d63"),r("ac1f"),r("25f0"),r("5319"),Date.prototype.format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[r]:("00"+e[r]).substr((""+e[r]).length)));return t},Date.prototype.addSeconds=function(t){return this.setSeconds(this.getSeconds()+t),this},Date.prototype.addMinutes=function(t){return this.setMinutes(this.getMinutes()+t),this},Date.prototype.addHours=function(t){return this.setHours(this.getHours()+t),this},Date.prototype.addDays=function(t){return this.setDate(this.getDate()+t),this},Date.prototype.addMonths=function(t){return this.setMonth(this.getMonth()+t),this},Date.prototype.addYears=function(t){return this.setFullYear(this.getFullYear()+t),this}},3837:function(t,e,r){"use strict";var a=r("cd2f"),n=r.n(a);n.a},"44e7":function(t,e,r){var a=r("861d"),n=r("c6b6"),s=r("b622"),i=s("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==n(t))}},"4d63":function(t,e,r){var a=r("83ab"),n=r("da84"),s=r("94ca"),i=r("7156"),o=r("9bf2").f,c=r("241c").f,l=r("44e7"),u=r("ad6d"),d=r("9f7f"),p=r("6eeb"),f=r("d039"),v=r("69f3").set,h=r("2626"),m=r("b622"),g=m("match"),x=n.RegExp,b=x.prototype,C=/a/g,_=/a/g,E=new x(C)!==C,y=d.UNSUPPORTED_Y,$=a&&s("RegExp",!E||y||f((function(){return _[g]=!1,x(C)!=C||x(_)==_||"/a/i"!=x(C,"i")})));if($){var R=function(t,e){var r,a=this instanceof R,n=l(t),s=void 0===e;if(!a&&n&&t.constructor===R&&s)return t;E?n&&!s&&(t=t.source):t instanceof R&&(s&&(e=u.call(t)),t=t.source),y&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var o=i(E?new x(t,e):x(t,e),a?this:b,R);return y&&r&&v(o,{sticky:r}),o},w=function(t){t in R||o(R,t,{configurable:!0,get:function(){return x[t]},set:function(e){x[t]=e}})},S=c(x),I=0;while(S.length>I)w(S[I++]);b.constructor=R,R.prototype=b,p(n,"RegExp",R)}h("RegExp")},5319:function(t,e,r){"use strict";var a=r("d784"),n=r("825a"),s=r("7b0b"),i=r("50c4"),o=r("a691"),c=r("1d80"),l=r("8aa59"),u=r("14c3"),d=Math.max,p=Math.min,f=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,m=function(t){return void 0===t?t:String(t)};a("replace",2,(function(t,e,r,a){var g=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,x=a.REPLACE_KEEPS_$0,b=g?"$":"$0";return[function(r,a){var n=c(this),s=void 0==r?void 0:r[t];return void 0!==s?s.call(r,n,a):e.call(String(n),r,a)},function(t,a){if(!g&&x||"string"===typeof a&&-1===a.indexOf(b)){var s=r(e,t,this,a);if(s.done)return s.value}var c=n(t),f=String(this),v="function"===typeof a;v||(a=String(a));var h=c.global;if(h){var _=c.unicode;c.lastIndex=0}var E=[];while(1){var y=u(c,f);if(null===y)break;if(E.push(y),!h)break;var $=String(y[0]);""===$&&(c.lastIndex=l(f,i(c.lastIndex),_))}for(var R="",w=0,S=0;S<E.length;S++){y=E[S];for(var I=String(y[0]),P=d(p(o(y.index),f.length),0),D=[],A=1;A<y.length;A++)D.push(m(y[A]));var N=y.groups;if(v){var k=[I].concat(D,P,f);void 0!==N&&k.push(N);var M=String(a.apply(void 0,k))}else M=C(I,f,P,D,N,a);P>=w&&(R+=f.slice(w,P)+M,w=P+I.length)}return R+f.slice(w)}];function C(t,r,a,n,i,o){var c=a+t.length,l=n.length,u=h;return void 0!==i&&(i=s(i),u=v),e.call(o,u,(function(e,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return r.slice(0,a);case"'":return r.slice(c);case"<":o=i[s.slice(1,-1)];break;default:var u=+s;if(0===u)return e;if(u>l){var d=f(u/10);return 0===d?e:d<=l?void 0===n[d-1]?s.charAt(1):n[d-1]+s.charAt(1):e}o=n[u-1]}return void 0===o?"":o}))}}))},"62b3":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container"},[r("nav",{attrs:{"aria-label":"breadcrumb"}},[r("ol",{staticClass:"breadcrumb border-bottom"},[r("li",{staticClass:"breadcrumb-item h6"},[r("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),r("li",{staticClass:"breadcrumb-item active h6",attrs:{"aria-current":"page"}},[t._v("購物車")])])])]),r("div",{staticClass:"container"},[r("h3",{staticClass:"text-center mb-3"},[t._v("購物車內容")]),r("div",[r("table",{staticClass:"table d-none d-md-table"},[t._m(0),r("tbody",t._l(t.cart,(function(e){return r("tr",{key:e.product.productId},[r("td",{attrs:{width:"124px"}},[r("img",{attrs:{src:e.product.imgURL,alt:"product",width:"100%",height:"auto"}})]),r("td",[t._v(" "+t._s(e.product.title)+" ")]),r("td",[t._v("$ "+t._s(e.product.price))]),r("td",[t._v(t._s(e.qty)+t._s(e.product.unit))]),r("td",[t._v("$ "+t._s(e.product.price*e.qty))]),r("td",[r("button",{staticClass:"btn btn-outline-danger",on:{click:function(r){return t.deleteCart(e.product.productId)}}},[r("i",{staticClass:"far fa-trash-alt"})])])])})),0)]),r("table",{staticClass:"table mobile d-table d-md-none"},t._l(t.cart,(function(e){return r("tbody",{key:e.product.productId,staticClass:"border-0"},[r("tr",[r("td",[r("img",{attrs:{src:e.product.imgURL,alt:"product",width:"100%"}})]),r("td",[t._v(" "+t._s(e.product.title)),r("br"),t._v(" $ "+t._s(e.product.price)+" ")]),r("td",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-outline-danger",on:{click:function(r){return t.deleteCart(e.product.productId)}}},[r("i",{staticClass:"far fa-trash-alt"})])])]),r("tr",[r("td",{staticClass:"border-0",attrs:{colspan:"2"}},[t._v("x"+t._s(e.qty)+t._s(e.product.unit))]),r("td",{staticClass:"border-0 text-right"},[t._v("$"+t._s(e.product.price*e.qty))])])])})),0)])]),r("div",{staticClass:"container mb-5"},[r("h5",{staticClass:"p-3 bg-light text-right"},[t._v("總計 "),r("span",{staticClass:"text-danger"},[t._v("$ "+t._s(t.total))])])]),t._m(1),r("div",{staticClass:"container"},[r("h3",{staticClass:"text-center mb-3"},[t._v("結帳表單")]),r("div",{staticClass:"col-md-10 mx-auto mb-5"},[r("form",[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"email"}},[t._v("Email *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("email")},attrs:{type:"text",name:"email",id:"email",placeholder:"請輸入 Email",spellcheck:"false"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),r("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.errors.first("email"))}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"name"}},[t._v("收件人姓名 *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("名字")},attrs:{type:"text",name:"名字",id:"name",placeholder:"請輸入姓名"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),r("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.errors.first("名字"))}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"phone"}},[t._v("收件人電話 *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.phone,expression:"user.phone"},{name:"validate",rawName:"v-validate",value:"required|numeric",expression:"'required|numeric'"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("電話")},attrs:{type:"text",name:"電話",id:"phone",placeholder:"請輸入電話"},domProps:{value:t.user.phone},on:{input:function(e){e.target.composing||t.$set(t.user,"phone",e.target.value)}}}),r("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.errors.first("電話"))}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"address"}},[t._v("收件人地址 *")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.address,expression:"user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.first("地址")},attrs:{type:"text",name:"地址",id:"address",placeholder:"請輸入地址"},domProps:{value:t.user.address},on:{input:function(e){e.target.composing||t.$set(t.user,"address",e.target.value)}}}),r("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.errors.first("地址"))}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"comment"}},[t._v("留言")]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.user.comment,expression:"user.comment"}],staticClass:"form-control",attrs:{id:"comment",rows:"5",spellcheck:"false"},domProps:{value:t.user.comment},on:{input:function(e){e.target.composing||t.$set(t.user,"comment",e.target.value)}}})])]),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-danger",on:{click:t.createOrder}},[t._v("建立訂單")])])])])])},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"bg-dark text-light"},[r("tr",[r("th"),r("th",{attrs:{scope:"col"}},[t._v("品項")]),r("th",{attrs:{scope:"col"}},[t._v("單價")]),r("th",{attrs:{scope:"col"}},[t._v("數量")]),r("th",{attrs:{scope:"col"}},[t._v("總計")]),r("th",{attrs:{scope:"col",width:"80px"}},[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mb-5"},[r("h3",{staticClass:"text-center mb-3"},[t._v("優惠碼")]),r("div",{staticClass:"form-group d-flex coupon col-md-8 mx-auto"},[r("input",{staticClass:"form-control col",attrs:{type:"text",placeholder:"請輸入優惠碼"}}),r("button",{staticClass:"btn btn-outline-danger"},[t._v("套用優惠碼")])])])}],s=(r("4160"),r("159b"),r("31e7"),r("dc59")),i=s["a"].firestore(),o={computed:{cart:function(){return this.$store.state.cart.cart},total:function(){return this.$store.state.cart.total}},data:function(){return{user:{name:"",email:"",phone:"",address:"",comment:""}}},methods:{getCart:function(){this.$store.dispatch("getCart")},deleteCart:function(t){this.$store.dispatch("deleteCart",t)},clearCart:function(){var t=this;i.collection("cart").get().then((function(e){e.forEach((function(e){e.ref.delete(),t.$store.dispatch("getCart")}))}))},createOrder:function(){var t=this,e=this,r=(new Date).format("yyyy-MM-dd hh:mm:ss"),a="";this.$validator.validate().then((function(n){if(n){var s=Object.assign({},{cart:e.cart,user:e.user,total:e.total,createTime:r,ispaid:!1});e.$store.commit("LOADING",!0),i.collection("orders").add(s).then((function(r){e.$store.commit("LOADING",!1),a=r.id,e.clearCart(),t.$router.push("/checkout/payment/".concat(a))})).catch((function(t){e.$store.commit("LOADING",!1),console.error("Error adding document: ",t)}))}else t.$store.dispatch("updateMessage",{message:"請正確完成表單",status:"danger"})}))}},created:function(){this.getCart()}},c=o,l=(r("3837"),r("2877")),u=Object(l["a"])(c,a,n,!1,null,"dc1fafaa",null);e["default"]=u.exports},6547:function(t,e,r){var a=r("a691"),n=r("1d80"),s=function(t){return function(e,r){var s,i,o=String(n(e)),c=a(r),l=o.length;return c<0||c>=l?t?"":void 0:(s=o.charCodeAt(c),s<55296||s>56319||c+1===l||(i=o.charCodeAt(c+1))<56320||i>57343?t?o.charAt(c):s:t?o.slice(c,c+2):i-56320+(s-55296<<10)+65536)}};t.exports={codeAt:s(!1),charAt:s(!0)}},7156:function(t,e,r){var a=r("861d"),n=r("d2bb");t.exports=function(t,e,r){var s,i;return n&&"function"==typeof(s=e.constructor)&&s!==r&&a(i=s.prototype)&&i!==r.prototype&&n(t,i),t}},"8aa59":function(t,e,r){"use strict";var a=r("6547").charAt;t.exports=function(t,e,r){return e+(r?a(t,e).length:1)}},9263:function(t,e,r){"use strict";var a=r("ad6d"),n=r("9f7f"),s=RegExp.prototype.exec,i=String.prototype.replace,o=s,c=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),l=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(o=function(t){var e,r,n,o,d=this,p=l&&d.sticky,f=a.call(d),v=d.source,h=0,m=t;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),m=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(v="(?: "+v+")",m=" "+m,h++),r=new RegExp("^(?:"+v+")",f)),u&&(r=new RegExp("^"+v+"$(?!\\s)",f)),c&&(e=d.lastIndex),n=s.call(p?r:d,m),p?n?(n.input=n.input.slice(h),n[0]=n[0].slice(h),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:c&&n&&(d.lastIndex=d.global?n.index+n[0].length:e),u&&n&&n.length>1&&i.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n}),t.exports=o},"9f7f":function(t,e,r){"use strict";var a=r("d039");function n(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=a((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=a((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,r){"use strict";var a=r("23e7"),n=r("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ad6d:function(t,e,r){"use strict";var a=r("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},cd2f:function(t,e,r){},d784:function(t,e,r){"use strict";r("ac1f");var a=r("6eeb"),n=r("d039"),s=r("b622"),i=r("9263"),o=r("9112"),c=s("species"),l=!n((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=s("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!n((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));t.exports=function(t,e,r,d){var v=s(t),h=!n((function(){var e={};return e[v]=function(){return 7},7!=""[t](e)})),m=h&&!n((function(){var e=!1,r=/a/;return"split"===t&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[v]=/./[v]),r.exec=function(){return e=!0,null},r[v](""),!e}));if(!h||!m||"replace"===t&&(!l||!u||p)||"split"===t&&!f){var g=/./[v],x=r(v,""[t],(function(t,e,r,a,n){return e.exec===i?h&&!n?{done:!0,value:g.call(e,r,a)}:{done:!0,value:t.call(r,e,a)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),b=x[0],C=x[1];a(String.prototype,t,b),a(RegExp.prototype,v,2==e?function(t,e){return C.call(t,this,e)}:function(t){return C.call(t,this)})}d&&o(RegExp.prototype[v],"sham",!0)}}}]);
//# sourceMappingURL=chunk-ec12f8ca.7dc5eaa6.js.map