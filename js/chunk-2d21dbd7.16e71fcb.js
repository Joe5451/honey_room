(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21dbd7"],{d31c:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"container"},[r("nav",{attrs:{"aria-label":"breadcrumb"}},[r("ol",{staticClass:"breadcrumb border-bottom"},[r("li",{staticClass:"breadcrumb-item h6"},[r("router-link",{attrs:{to:"/"}},[t._v("首頁")])],1),r("li",{staticClass:"breadcrumb-item active h6",attrs:{"aria-current":"page"}},[t._v("完成訂單 & 付款")])])])]),r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8 mx-auto"},[r("div",[t.order.ispaid?r("div",{staticClass:"text-center"},[r("h2",[t._v("感謝惠顧!")]),r("p",{staticClass:"text-secondary"},[t._v("你的付款已完成")])]):t._e(),t.order.ispaid?t._e():r("h2",{staticClass:"text-center"},[t._v("訂單已建立")]),r("p",{staticClass:"text-center text-secondary"},[t._v("訂單編號為 "),r("span",{staticClass:"border px-1",staticStyle:{cursor:"pointer"},attrs:{id:"copyText","data-trigger":"hover","data-toggle":"popover","data-content":"點擊複製"},on:{click:t.copyOrderid}},[t._v(t._s(t.orderId))])]),r("table",{staticClass:"table"},[t._m(0),t._l(t.order.cart,(function(e){return r("tr",{key:e.cartId},[r("td",[t._v(t._s(e.product.title))]),r("td",[t._v(t._s(e.qty)+t._s(e.product.unit))]),r("td",{staticClass:"text-right"},[t._v("$"+t._s(e.qty*e.product.price))])])})),r("tr",[r("td",{attrs:{colspan:"2"}},[t._v("總計")]),r("td",{staticClass:"text-danger font-weight-bold text-right"},[t._v("$"+t._s(t.order.total))])])],2)]),r("div",{staticClass:"mt-5"},[r("h2",{staticClass:"text-center mb-3"},[t._v("購買者資訊")]),t.order.user?r("table",{staticClass:"table"},[r("tr",[r("th",{staticClass:"border-top-0"},[t._v("Email")]),r("td",{staticClass:"border-top-0"},[t._v(t._s(t.order.user.email))])]),r("tr",[r("th",[t._v("收件人姓名")]),r("td",[t._v(t._s(t.order.user.name))])]),r("tr",[r("th",[t._v("收件人電話")]),r("td",[t._v(t._s(t.order.user.phone))])]),r("tr",[r("th",[t._v("收件人地址")]),r("td",[t._v(t._s(t.order.user.address))])]),r("tr",[r("th",[t._v("付款狀態")]),r("td",[t.order.ispaid?r("span",{staticClass:"font-weight-bold text-success"},[t._v("已付款")]):r("span",{staticClass:"font-weight-bold text-danger"},[t._v("尚未付款")])])])]):t._e()]),r("div",{staticClass:"clearfix mb-5"},[t.order.ispaid?t._e():r("button",{staticClass:"btn btn-danger btn-block float-right",on:{click:function(e){return t.topaid(t.orderId)}}},[t._v("確認付款去")]),t.order.ispaid?r("button",{staticClass:"btn btn-warning btn-block text-light",on:{click:t.toProducts}},[t._v("繼續逛逛")]):t._e()])])])])])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("tr",{staticClass:"bg-dark text-light"},[r("th",{staticClass:"border-top-0"},[t._v("品項")]),r("th",{staticClass:"border-top-0"},[t._v("數量")]),r("th",{staticClass:"border-top-0 text-right"},[t._v("金額")])])}],a=r("1157"),c=r.n(a),i=r("dc59"),d=i["a"].firestore(),n={data:function(){return{orderId:"",order:{}}},methods:{topaid:function(t){var e=this;e.$store.commit("LOADING",!0),e.order.ispaid=!0,d.collection("orders").doc(t).set(e.order).then((function(r){e.$store.commit("LOADING",!1),e.getOrder(t),window.scrollTo(0,0)})).catch((function(t){e.$store.commit("LOADING",!1),console.error("Error adding document: ",t)}))},getOrder:function(t){this.$store.commit("LOADING",!0);var e=this;d.collection("orders").doc(t).get().then((function(t){e.order=Object.assign({},t.data()),e.$store.commit("LOADING",!1)})).catch((function(t){e.$store.commit("LOADING",!1),console.error("Error adding document: ",t)}))},toProducts:function(){this.$router.push("/products")},copyOrderid:function(t){var e=document.createRange();e.selectNode(document.getElementById("copyText"));var r=window.getSelection();r.removeAllRanges(),r.addRange(e),document.execCommand("copy"),this.$store.dispatch("updateMessage",{message:"已複製訂單編號",status:"success"})}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder(this.orderId)},mounted:function(){c()((function(){c()('[data-toggle="popover"]').popover()}))}},l=n,u=r("2877"),v=Object(u["a"])(l,s,o,!1,null,null,null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d21dbd7.16e71fcb.js.map