(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-720241ba"],{"1b8e":function(t,e,a){},"99af":function(t,e,a){"use strict";var s=a("23e7"),o=a("d039"),r=a("e8b5"),i=a("861d"),c=a("7b0b"),n=a("50c4"),d=a("8418"),l=a("65f0"),u=a("1dde"),p=a("b622"),m=a("2d00"),v=p("isConcatSpreadable"),g=9007199254740991,f="Maximum allowed index exceeded",b=m>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),h=u("concat"),_=function(t){if(!i(t))return!1;var e=t[v];return void 0!==e?!!e:r(t)},C=!b||!h;s({target:"Array",proto:!0,forced:C},{concat:function(t){var e,a,s,o,r,i=c(this),u=l(i,0),p=0;for(e=-1,s=arguments.length;e<s;e++)if(r=-1===e?i:arguments[e],_(r)){if(o=n(r.length),p+o>g)throw TypeError(f);for(a=0;a<o;a++,p++)a in r&&d(u,p,r[a])}else{if(p>=g)throw TypeError(f);d(u,p++,r)}return u.length=p,u}})},"9ee2":function(t,e,a){"use strict";var s=a("1b8e"),o=a.n(s);o.a},b0c0:function(t,e,a){var s=a("83ab"),o=a("9bf2").f,r=Function.prototype,i=r.toString,c=/^\s*function ([^ (]*)/,n="name";s&&!(n in r)&&o(r,n,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(t){return""}}})},fda8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticClass:"d-flex my-3 justify-content-between border-bottom py-3"},[a("h2",{staticClass:"m-0"},[t._v("商品管理")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal(!0)}}},[t._v("新增商品")])]),a("div",{staticClass:"d-none d-md-block"},[a("table",{staticClass:"table bg-white"},[t._m(0),a("tbody",t._l(t.products,(function(e){return a("tr",{key:e.productId},[a("td",[t._v(t._s(e.category))]),a("td",[t._v(t._s(e.title))]),a("td",{staticClass:"d-none d-md-table-cell"},[t._v("$ "+t._s(e.origin_price))]),a("td",[t._v("$ "+t._s(e.price))]),a("td",{staticClass:"d-none d-md-table-cell text-center"},[t._v(t._s(e.unit))]),a("td",{staticClass:"text-center"},[e.using?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",{staticClass:"text-danger"},[t._v("未啟用")])]),a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-primary mx-1",on:{click:function(a){return t.openModal(!1,e)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-sm btn-danger mx-1",on:{click:function(a){return t.openDelModal(e)}}},[t._v("刪除")])])])})),0)])]),a("div",{staticClass:"d-md-none"},[a("ul",t._l(t.products,(function(e){return a("li",{key:e.productId,staticClass:"border-bottom mb-3"},[a("h5",[t._v(t._s(e.title))]),a("div",{staticClass:"d-flex flex-wrap justify-content-between align-items-center"},[a("h6",[t._v(" 原價 $"+t._s(e.origin_price)),a("br"),t._v(" 售價 $"+t._s(e.price)+" ")]),a("div",{staticClass:"text-center"},[a("span",{staticClass:"bg-secondary text-light rounded-pill p-1"},[t._v(t._s(e.category))]),a("br"),e.using?a("span",{staticClass:"text-success"},[t._v("啟用")]):a("span",{staticClass:"text-danger"},[t._v("未啟用")])])]),a("div",{staticClass:"mb-2"},[a("button",{staticClass:"btn btn-sm btn-primary mx-1",on:{click:function(a){return t.openModal(!1,e)}}},[t._v("編輯")]),a("button",{staticClass:"btn btn-sm btn-danger mx-1",on:{click:function(a){return t.openDelModal(e)}}},[t._v("刪除")])])])})),0)]),a("div",{staticClass:"modal fade pr-0",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header bg-dark text-light"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t.newMode?a("span",[t._v("新增商品")]):a("span",[t._v("編輯商品")])]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"productFile"}},[t._v(" 上傳圖片 ")]),a("input",{staticClass:"form-control",attrs:{type:"file",id:"productFile"},on:{change:function(e){t.uploadImage(e,t.tempProduct.title)}}})]),a("div",{staticClass:"img-container mb-3"},[t.tempProduct.imgURL?a("img",{attrs:{src:t.tempProduct.imgURL,alt:"product",width:"100%"}}):t._e()])]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("商品名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入商品名稱"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-6 form-group"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),a("div",{staticClass:"col-md-6 form-group"},[a("label",{attrs:{for:"unit"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"text",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-6 form-group"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),a("div",{staticClass:"col-md-6 form-group"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("請輸入商品內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{id:"content",placeholder:"請輸入產品內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.using,expression:"tempProduct.using"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_using"},domProps:{checked:Array.isArray(t.tempProduct.using)?t._i(t.tempProduct.using,null)>-1:t.tempProduct.using},on:{change:function(e){var a=t.tempProduct.using,s=e.target,o=!!s.checked;if(Array.isArray(a)){var r=null,i=t._i(a,r);s.checked?i<0&&t.$set(t.tempProduct,"using",a.concat([r])):i>-1&&t.$set(t.tempProduct,"using",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.tempProduct,"using",o)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_using"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleProduct}},[t.newMode?a("span",[t._v("新增")]):a("span",[t._v("更新")])]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")])])])])]),a("div",{staticClass:"modal fade pr-0",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel2","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[a("p",{staticClass:"text-secondary"},[t._v(" 是否刪除 "),a("span",{staticClass:"text-danger font-weight-bold"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法復原)。 ")])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(e){return t.deleteProduct(t.tempProduct.productId)}}},[t._v("確認刪除")]),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")])])])])])])])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",{staticClass:"bg-dark text-light"},[a("th",{staticClass:"rounded-left overflow-hidden",attrs:{scope:"col"}},[t._v("分類")]),a("th",{attrs:{scope:"col"}},[t._v("商品名稱")]),a("th",{attrs:{scope:"col",width:"100px"}},[t._v("原價")]),a("th",{attrs:{scope:"col",width:"100px"}},[t._v("售價")]),a("th",{attrs:{scope:"col",width:"80px"}},[t._v("單位")]),a("th",{staticClass:"text-center",attrs:{scope:"col",width:"80px"}},[t._v("狀態")]),a("th",{staticClass:"text-center rounded-right overflow-hidden",attrs:{scope:"col",width:"140px"}},[t._v("編輯")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger"},[a("h5",{staticClass:"modal-title text-light",attrs:{id:"exampleModalLabel2"}},[t._v("刪除商品")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],r=(a("99af"),a("b0c0"),a("1157")),i=a.n(r),c=a("dc59"),n={computed:{products:function(){return this.$store.state.admin.products}},data:function(){return{tempProduct:{},newMode:!1}},methods:{getProducts:function(){this.$store.dispatch("getProducts")},openModal:function(t,e){t?(this.tempProduct={title:"",category:"",content:"",imgURL:"",origin_price:"",price:"",unit:"",using:!1},this.newMode=!0):(this.tempProduct=Object.assign({},e),this.newMode=!1),i()("#productFile").val(""),i()("#content").css("height","134px"),i()("#productModal").modal("show")},openDelModal:function(t){i()("#delProductModal").modal("show"),this.tempProduct=Object.assign({},t)},handleProduct:function(){var t=this;t.newMode?(t.$store.dispatch("addProduct",t.tempProduct),i()("#productModal").modal("hide")):(t.$store.dispatch("updateProduct",t.tempProduct),i()("#productModal").modal("hide"))},uploadImage:function(t,e){if(t.target.files[0]){this.$store.dispatch("updateLoading",!0);var a=t.target.files[0],s=c["a"].storage().ref("products/".concat(e,"/").concat(a.name)),o=s.put(a),r=this;o.on("state_changed",(function(t){}),(function(t){r.$store.dispatch("updateLoading",!1)}),(function(){o.snapshot.ref.getDownloadURL().then((function(t){r.tempProduct.imgURL=t,r.$store.dispatch("updateLoading",!1)}))}))}},deleteProduct:function(t){this.$store.dispatch("deleteProduct",t),i()("#delProductModal").modal("hide")}},created:function(){this.getProducts()}},d=n,l=(a("9ee2"),a("2877")),u=Object(l["a"])(d,s,o,!1,null,"70f3ba96",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-720241ba.d9cd69a8.js.map