{"version":3,"sources":["webpack:///./src/views/front/Payment.vue?d9b9","webpack:///src/views/front/Payment.vue","webpack:///./src/views/front/Payment.vue?c884","webpack:///./src/views/front/Payment.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","order","_e","ispaid","staticStyle","on","copyOrderid","_s","orderId","_m","_l","item","key","cartId","product","title","qty","unit","price","total","user","email","name","phone","address","$event","topaid","toProducts","staticRenderFns","component"],"mappings":"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","file":"js/chunk-2d21dbd7.16e71fcb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"container\"},[_c('nav',{attrs:{\"aria-label\":\"breadcrumb\"}},[_c('ol',{staticClass:\"breadcrumb border-bottom\"},[_c('li',{staticClass:\"breadcrumb-item h6\"},[_c('router-link',{attrs:{\"to\":\"/\"}},[_vm._v(\"首頁\")])],1),_c('li',{staticClass:\"breadcrumb-item active h6\",attrs:{\"aria-current\":\"page\"}},[_vm._v(\"完成訂單 & 付款\")])])])]),_c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-8 mx-auto\"},[_c('div',[(_vm.order.ispaid)?_c('div',{staticClass:\"text-center\"},[_c('h2',[_vm._v(\"感謝惠顧!\")]),_c('p',{staticClass:\"text-secondary\"},[_vm._v(\"你的付款已完成\")])]):_vm._e(),(!_vm.order.ispaid)?_c('h2',{staticClass:\"text-center\"},[_vm._v(\"訂單已建立\")]):_vm._e(),_c('p',{staticClass:\"text-center text-secondary\"},[_vm._v(\"訂單編號為 \"),_c('span',{staticClass:\"border px-1\",staticStyle:{\"cursor\":\"pointer\"},attrs:{\"id\":\"copyText\",\"data-trigger\":\"hover\",\"data-toggle\":\"popover\",\"data-content\":\"點擊複製\"},on:{\"click\":_vm.copyOrderid}},[_vm._v(_vm._s(_vm.orderId))])]),_c('table',{staticClass:\"table\"},[_vm._m(0),_vm._l((_vm.order.cart),function(item){return _c('tr',{key:item.cartId},[_c('td',[_vm._v(_vm._s(item.product.title))]),_c('td',[_vm._v(_vm._s(item.qty)+_vm._s(item.product.unit))]),_c('td',{staticClass:\"text-right\"},[_vm._v(\"$\"+_vm._s(item.qty * item.product.price))])])}),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_vm._v(\"總計\")]),_c('td',{staticClass:\"text-danger font-weight-bold text-right\"},[_vm._v(\"$\"+_vm._s(_vm.order.total))])])],2)]),_c('div',{staticClass:\"mt-5\"},[_c('h2',{staticClass:\"text-center mb-3\"},[_vm._v(\"購買者資訊\")]),(_vm.order.user)?_c('table',{staticClass:\"table\"},[_c('tr',[_c('th',{staticClass:\"border-top-0\"},[_vm._v(\"Email\")]),_c('td',{staticClass:\"border-top-0\"},[_vm._v(_vm._s(_vm.order.user.email))])]),_c('tr',[_c('th',[_vm._v(\"收件人姓名\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.name))])]),_c('tr',[_c('th',[_vm._v(\"收件人電話\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.phone))])]),_c('tr',[_c('th',[_vm._v(\"收件人地址\")]),_c('td',[_vm._v(_vm._s(_vm.order.user.address))])]),_c('tr',[_c('th',[_vm._v(\"付款狀態\")]),_c('td',[(_vm.order.ispaid)?_c('span',{staticClass:\"font-weight-bold text-success\"},[_vm._v(\"已付款\")]):_c('span',{staticClass:\"font-weight-bold text-danger\"},[_vm._v(\"尚未付款\")])])])]):_vm._e()]),_c('div',{staticClass:\"clearfix mb-5\"},[(!_vm.order.ispaid)?_c('button',{staticClass:\"btn btn-danger btn-block float-right\",on:{\"click\":function($event){return _vm.topaid(_vm.orderId)}}},[_vm._v(\"確認付款去\")]):_vm._e(),(_vm.order.ispaid)?_c('button',{staticClass:\"btn btn-warning btn-block text-light\",on:{\"click\":_vm.toProducts}},[_vm._v(\"繼續逛逛\")]):_vm._e()])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('tr',{staticClass:\"bg-dark text-light\"},[_c('th',{staticClass:\"border-top-0\"},[_vm._v(\"品項\")]),_c('th',{staticClass:\"border-top-0\"},[_vm._v(\"數量\")]),_c('th',{staticClass:\"border-top-0 text-right\"},[_vm._v(\"金額\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"container\">\r\n            <nav aria-label=\"breadcrumb\">\r\n                <ol class=\"breadcrumb border-bottom\">\r\n                    <li class=\"breadcrumb-item h6\"><router-link to=\"/\">首頁</router-link></li>\r\n                    <li class=\"breadcrumb-item active h6\" aria-current=\"page\">完成訂單 & 付款</li>\r\n                </ol>\r\n            </nav>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"row\">\r\n                <div class=\"col-md-8 mx-auto\">\r\n                    <div>\r\n                        <div class=\"text-center\" v-if=\"order.ispaid\">\r\n                            <h2>感謝惠顧!</h2>\r\n                            <p class=\"text-secondary\">你的付款已完成</p>\r\n                        </div>\r\n                        <h2 class=\"text-center\" v-if=\"!order.ispaid\">訂單已建立</h2>\r\n                        <p class=\"text-center text-secondary\">訂單編號為\r\n                            <span class=\"border px-1\" id=\"copyText\" @click=\"copyOrderid\" data-trigger=\"hover\" data-toggle=\"popover\" data-content=\"點擊複製\" style=\"cursor:pointer\">{{orderId}}</span>\r\n                        </p>\r\n                        <table class=\"table\">\r\n                            <tr class=\"bg-dark text-light\">\r\n                                <th class=\"border-top-0\">品項</th>\r\n                                <th class=\"border-top-0\">數量</th>\r\n                                <th class=\"border-top-0 text-right\">金額</th>\r\n                            </tr>\r\n                            <tr v-for=\"item in order.cart\" :key=\"item.cartId\">\r\n                                <td>{{ item.product.title }}</td>\r\n                                <td>{{ item.qty }}{{ item.product.unit }}</td>\r\n                                <td class=\"text-right\">${{ item.qty * item.product.price }}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td colspan=\"2\">總計</td>\r\n                                <td class=\"text-danger font-weight-bold text-right\">${{ order.total }}</td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    <div class=\"mt-5\">\r\n                        <h2 class=\"text-center mb-3\">購買者資訊</h2>\r\n                        <table class=\"table\" v-if=\"order.user\">\r\n                            <tr>\r\n                                <th class=\"border-top-0\">Email</th>\r\n                                <td class=\"border-top-0\">{{ order.user.email }}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>收件人姓名</th>\r\n                                <td>{{ order.user.name }}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>收件人電話</th>\r\n                                <td>{{ order.user.phone }}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>收件人地址</th>\r\n                                <td>{{ order.user.address }}</td>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>付款狀態</th>\r\n                                <td>\r\n                                    <span class=\"font-weight-bold text-success\" v-if=\"order.ispaid\">已付款</span>\r\n                                    <span class=\"font-weight-bold text-danger\" v-else>尚未付款</span>\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    <div class=\"clearfix mb-5\">\r\n                        <button class=\"btn btn-danger btn-block float-right\" @click=\"topaid(orderId)\" v-if=\"!order.ispaid\">確認付款去</button>\r\n                        <button class=\"btn btn-warning btn-block text-light\" @click=\"toProducts\" v-if=\"order.ispaid\">繼續逛逛</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from 'jquery'\r\nimport {fb} from '../../firebase'\r\nconst db = fb.firestore();\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            orderId: \"\",\r\n            order: {}\r\n        }\r\n    },\r\n    methods: {\r\n        topaid(id) {\r\n            const vm = this;\r\n            vm.$store.commit('LOADING', true);\r\n            vm.order.ispaid = true;\r\n            db.collection('orders').doc(id).set(vm.order).then((doc) => {\r\n                vm.$store.commit('LOADING', false);\r\n                vm.getOrder(id);\r\n                window.scrollTo(0, 0);\r\n            })\r\n            .catch((error) => {\r\n                vm.$store.commit('LOADING', false);\r\n                console.error(\"Error adding document: \", error);\r\n            });\r\n        },\r\n        getOrder(id) {\r\n            this.$store.commit('LOADING', true);\r\n            const vm = this;\r\n            db.collection('orders').doc(id).get()\r\n            .then((doc) => {\r\n                vm.order = Object.assign({}, doc.data());\r\n                vm.$store.commit('LOADING', false);\r\n\r\n            })\r\n            .catch(function(error) {\r\n                vm.$store.commit('LOADING', false);\r\n                console.error(\"Error adding document: \", error);\r\n            });\r\n        },\r\n        toProducts() {\r\n            this.$router.push('/products');\r\n        },\r\n        copyOrderid(e) {          \r\n            let TextRange = document.createRange();\r\n            TextRange.selectNode(document.getElementById('copyText'));\r\n            let sel = window.getSelection();\r\n            sel.removeAllRanges();\r\n            sel.addRange(TextRange);\r\n\r\n            document.execCommand(\"copy\");\r\n            this.$store.dispatch('updateMessage', {message: '已複製訂單編號', status: 'success'});\r\n        }\r\n    },\r\n    created() {\r\n        this.orderId = this.$route.params.orderId;\r\n        this.getOrder(this.orderId);\r\n    },\r\n    mounted() {\r\n        $(function () {\r\n            $('[data-toggle=\"popover\"]').popover()\r\n        })\r\n    }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Payment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Payment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Payment.vue?vue&type=template&id=a774b9d0&\"\nimport script from \"./Payment.vue?vue&type=script&lang=js&\"\nexport * from \"./Payment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}